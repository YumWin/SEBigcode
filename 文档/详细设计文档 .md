# 详细设计描述文档

## 目录

[TOC]

## 更新历史

| 修改人员 | 日期      | 修改原因                    | 版本号       |
| -------- | --------- | --------------------------- | ------------ |
| 车一晗   | 2020.6.24 | 设计模板，添加了userbl模块  | v1.0         |
| 刁苏阳   | 2020.6.25 | 添加adminbl及orderbl模块    | v1.0.1       |
| 王博     | 2020.6.26 | 添加了roombl模块            | v1.0.2       |
| 郑镕圭   | 2020.6.26 | 添加了hotelbl和couponbl模块 | v1.0.3       |
| 车一晗   | 2020.7.3  | 合并                        | v2.0.0最终版 |



## 1. 引言

### 1.1 编制目的

本报告详细完成对GreenTrip酒店管理系统的详细设计，达到指导后续软件构造的目的，同时实现和测试人员及用户的沟通。

本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。



### 1.2 词汇表

| 词汇名称  | 词汇含义                                                     | 备注                                                         |
| :-------: | ------------------------------------------------------------ | ------------------------------------------------------------ |
| GreenTrip | 字面意思“绿途”，谐音“旅途”，寓意着对客户在外旅行一路顺风的祝福 | 代指由来自南京大学软件学院的团队进行开发测试维护的一套涵盖酒店预订、房间信息维护、优惠策略等功能的酒店管理系统 |

<br>

### 1.3 参考资料

《软件工程与计算（卷二） 软件开发的技术基础》



## 2. 产品描述

参考用例文档和软件需求规格描述文档中对产品的描述



## 3. 系统结构设计概述

体系设计文档中对于体系结构设计的概述



## 4. 结构视角

### 4.1 业务逻辑层的分解

业务逻辑层的开发包图参见软件体系结构文档



#### 4.1.1 adminbl模块

（1）模块概述

adminbl模块承担的需求见需求规格说明文档功能需求及相关非功能需求。

adminbl模块的职责及接口参见软件系统结构描述文档

（2）整体结构

根据体系结构的设计，我们使用分层的模式来构建本系统，将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口。比如展示层和业务逻辑层之间，我们添加AdminController接口，业务逻辑层和数据层之间添加AdminService接口。样，我们将依赖于接口而非实体类，增加了系统的灵活性。

Admin模块的设计如下图所示：

![服务端用例图 _1_.jpg](https://i.loli.net/2020/06/25/EoXS51KGkHDirba.png)  

adminbl模块的各个类的职责如下表所示：

| 模块             | 职责                                                         |
| ---------------- | ------------------------------------------------------------ |
| AdminServiceImpl | 负责实现用户账号管理所需要的服务                             |
| Admin            | 系统用户的领域模型对象，拥有用户数据的用户名和密码，可以解决登录问题 |

（3）模块内部类的接口规范

AdminServiceImpl的接口规范如下表所示：

<table class="lake-table">
  <tbody>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>提供的服务（供接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>AdminServiceImpl.registerAccount</p>
      </td>
      <td style="text-align: center;">
        <p>语法</p>
      </td>
      <td style="text-align: center;">
        <p>public ResponseVO addManager(UserForm userForm);</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td style="text-align: center;">
        <p>获取前端传入的注册用户对象信息</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td style="text-align: center;">
        <p>返回注册结果</p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>AccountServiceImpl.getAllManagers</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List &lt;User&gt; getAllManagers();</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>前端获取管理员列表</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回所有管理人员信息</p>
      </td>
    </tr> 
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>需要的服务（需接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>vo.ResponseVO</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>检查调用是否成功</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>po.Admin</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>实例化对象</p>
      </td>
    </tr>
      </tr>
      <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>AdminMapper.addManager(User user)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>新增一个管理人员实例化对象</p>
      </td>
    </tr>
</tr>
      <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>AdminMapper.getAllManagers()</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>获取所有管理人员实例化对象</p>
      </td>
    </tr>
   </tbody>
</table>

（4）业务逻辑层的动态模型

下图表明了酒店管理系统中，当网站管理人员获取其他管理人员信息时时，用户业务逻辑处理的相关对象之间的协作

![概念类图.jpg](https://i.loli.net/2020/06/25/JmS68RvQncYHdzA.png)



#### 4.1.2 couponbl模块

（1）模块概述

couponbl模块承担的需求见需求规格说明文档功能需求及相关非功能需求。

couponbl模块的职责及接口参见软件系统结构描述文档

（2）整体结构

根据体系结构的设计，我们使用分层的模式来构建本系统，将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口。比如展示层和业务逻辑层之间，我们添加CouponController接口，业务逻辑层和数据层之间添加CouponService接口。样，我们将依赖于接口而非实体类，增加了系统的灵活性。

couponbl模块的设计如下图所示：

![coupon](https://i.loli.net/2020/06/26/VWqKzcAiXu9sBgJ.png)



couponbl模块的各个类的职责如下表所示：

| 模块                | 职责                                           |
| ------------------- | ---------------------------------------------- |
| CouponServiceImpl   | 负责实现优惠策略管理所需要的服务               |
| CouponMatchStrategy | 负责优惠策略类型的匹配服务                     |
| Coupon              | 优惠策略的领域模型对象，拥有优惠策略的详细信息 |

  (3)模块内部类的接口规范

CouponServiceImpl和CouponMatchStrategy的接口规范如下表所示：

<table class="lake-table">
  <tbody>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>提供的服务（供接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>CouponServiceImpl.getMatchOrderCoupon</p>
      </td>
      <td style="text-align: center;">
        <p>语法</p>
      </td>
      <td style="text-align: center;">
        <p>public  List<Coupon> getMatchOrderCoupon(OrderVO orderVO);</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td style="text-align: center;">
        <p>无</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td style="text-align: center;">
        <p>返回订单对应的所有优惠策略</p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>CouponServiceImpl.getHotelAllCoupon</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public  List<Coupon> getHotelAllCoupon(Integer hotelId);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在hotelId对应的酒店</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回hotelId对应酒店的所有优惠策略</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>CouponServiceImpl.getWebsiteAllCoupon</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List<Coupon> getWebsiteAllCoupon();</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>网站营销人员已经过认证</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回网站所有的优惠策略</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>CouponServiceImpl.deleteCoupon</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public boolean deleteCoupon(Integer hotelId,Integer couponId);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在couponId对应的优惠策略</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回删除成功的信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>CouponServiceImpl.addHotelTargetMoneyCoupon</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public CouponVO addHotelTargetMoneyCoupon(HotelTargetMoneyCouponVO couponVO);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在满减优惠需要添加</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回添加策略成功的信息</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>CouponServiceImpl.addHotelTargetRoomCoupon</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public CouponVO addHotelTargetRoomCoupon(HotelTargetRoomCouponVO couponVO);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在多间优惠需要添加</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回添加成功的信息</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>CouponServiceImpl.addHotelTimeCoupon</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public CouponVO addHotelTimeCoupon(TimeCouponVO couponVO);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在限时优惠需要添加</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回添加成功的信息</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>CouponServiceImpl.addCoopEnterpriseCoupon</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public CouponVO addCoopEnterpriseCoupon(CoopEnterpriseCouponVO couponVO);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在合作企业优惠需要添加</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回添加成功的信息</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>CouponServiceImpl.addBirthdayCoupon</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public CouponVO addBirthdayCoupon(BirthdayCouponVO couponVO);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在生日优惠需要添加</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回添加成功的信息</p>
      </td>
    </tr>
<tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>CouponServiceImpl.addVipCoupon</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public CouponVO addVipCoupon(VipCouponVO couponVO);</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在VIP优惠需要添加</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回网站的VIP规则</p>
      </td>
</tr>
      <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>CouponMatchStrategy.isMatch</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public boolean isMatch(OrderVO orderVO, Coupon coupon);</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>无</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回网站的VIP规则</p>
      </td>
</tr>
      <tr>
          <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p><strong>需要的服务（需接口）</strong></p>
  </td>
</tr>
<tr>
  <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>vo.ResponseVO</p>
  </td>
  <td rowspan="1" colspan="2" style="text-align: center;">
    <p>检查调用是否成功</p>
  </td>
</tr>
<tr>
  <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>po.Coupon</p>
  </td>
  <td rowspan="1" colspan="2" style="text-align: center;">
    <p>用户实体类</p>
  </td>
</tr>
<tr>
  <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>couponMapper.insertCoupon(Coupon coupon)</p>
  </td>
  <td rowspan="1" colspan="2" style="text-align: center;">
    <p>新添加一个优惠策略</p>
  </td>
</tr>
<tr>
  <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>couponMapper.selectByHotelId(Integer hotelId)</p>
  </td>
  <td colspan="2" style="text-align: center; background-color: #FFFFFF;">
    <p>根据hotelId查找酒店的全部订单</p>
  </td>
</tr>
  <tr>
  <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>couponMapper.deleteCoupon(int hotelId,int couponId)</p>
  </td>
  <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
    <p>根据hotelId和couponId删除对应的订单</p>
  </td>
</tr>
</tbody>
</table>

（4）业务逻辑层的动态模型

下图表明了GreenTrip酒店管理系统中，当酒店工作人员要获得酒店对应的优惠策略时，优惠策略业务逻辑处理的相关对象之间的协作

![couponbe](https://i.loli.net/2020/06/26/SKvpVgEdOCxfaL2.png)

  

#### 4.1.3 hotelbl模块

（1）模块概述

hotelbl模块承担的需求见需求规格说明文档功能需求及相关非功能需求。

hotelbl模块的职责及接口参见软件系统结构描述文档

（2）整体结构

根据体系结构的设计，我们使用分层的模式来构建本系统，将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口。比如展示层和业务逻辑层之间，我们添加HotelController接口，业务逻辑层和数据层之间添加HotelService接口。样，我们将依赖于接口而非实体类，增加了系统的灵活性。

hotelbl模块的设计如下图所示：

![hotel](https://i.loli.net/2020/06/26/IALiatG7holVMKu.png)



hotelbl模块的各个类的职责如下表所示：

| 模块             | 职责                                   |
| ---------------- | -------------------------------------- |
| HotelServiceImpl | 负责实现酒店管理所需要的服务           |
| Hotel            | 酒店的领域模型对象，拥有酒店的详细信息 |

  (3)模块内部类的接口规范

HotelServiceImpl的接口规范如下表所示：

<table class="lake-table">
  <tbody>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>提供的服务（供接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>HotelServiceImpl.addHotel</p>
      </td>
      <td style="text-align: center;">
        <p>语法</p>
      </td>
      <td style="text-align: center;">
        <p>public void addHotel(HotelVO hotelVO);</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td style="text-align: center;">
        <p>存在未添加的酒店</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td style="text-align: center;">
        <p>返回添加成功的信息</p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>HotelServiceImpl.deleteHotel</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public void deleteHotel(Integer hotelId);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在不再合作或不存在的酒店需要删除</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回删除成功的信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.searchHotel</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List<HotelVO> searchHotel(String address,String bizRegion);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>用户需要根据地址商圈筛选合适的酒店</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回对应的酒店列表</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.updateHotelInfo</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public  void updateHotelInfo(HotelVO hotelVO);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在一些酒店信息需要更新</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回更新结果</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.detailedSearchHotel</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List<HotelVO> detailedSearchHotel;</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>用户需要根据酒店详细信息筛选合适的酒店</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回对应的酒店列表</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.rateSortHotel</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public  List<HotelVO> rateSortHotel();</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>用户想要查看按照评分排序的酒店列表</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回对应的酒店列表</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.priceSortHotel</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List<HotelVO> priceSortHotel();</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>用户想要查看按照价格排序的酒店列表</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回对应的酒店列表</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.updateRoomInfo</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public void updateRoomInfo(Integer hotelId, String roomType,Integer rooms);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在酒店房间信息需要更改</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回更新后的房间信息</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.modifyVIPRules</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public void modifyVIPRules(VipInfoVO vipInfoVO);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>无</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回更新的VIP规则</p>
      </td>
    </tr>
<tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.getVIPRules</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public  VipInfoVO getVIPRules();</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>无</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回网站的VIP规则</p>
      </td>
</tr>
<tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.retrieveHotels</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public  List<HotelVO> retrieveHotels();</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>无</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回包含所有酒店的酒店列表</p>
      </td>
</tr>
<tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.retrieveHotelDetails</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public HotelVO retrieveHotelDetails(Integer hotelId);</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在对应id的酒店</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回id对应的酒店详细信息</p>
      </td>
</tr>
<tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.getRoomCurNum</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public  int getRoomCurNum(Integer hotelId,String roomType);</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在对应id的酒店</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回酒店对应房型的房间数量</p>
      </td>
</tr>
<tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.getComments</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public  List<CommentVO> getComments(Integer hotelId);</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在对应id的酒店</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回id对应酒店的所有评论</p>
      </td>
</tr>
<tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.addComments</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public  void addComments(CommentVO comment);</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在新添加的酒店评论</p>
      </td>
</tr>
<tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回添加成功的信息</p>
      </td>
</tr>
      <tr>
  <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p><strong>需要的服务（需接口）</strong></p>
  </td>
</tr>
<tr>
  <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>vo.ResponseVO</p>
  </td>
  <td rowspan="1" colspan="2" style="text-align: center;">
    <p>检查调用是否成功</p>
  </td>
</tr>
<tr>
  <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>po.Hotel</p>
  </td>
  <td rowspan="1" colspan="2" style="text-align: center;">
    <p>用户实体类</p>
  </td>
</tr>
<tr>
  <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>hotelMapper.insertHotel(Hotel hotel)</p>
  </td>
  <td rowspan="1" colspan="2" style="text-align: center;">
    <p>新添加一个酒店</p>
  </td>
</tr>
<tr>
  <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>hotelMapper.selectAllHotel()</p>
  </td>
  <td colspan="2" style="text-align: center; background-color: #FFFFFF;">
    <p>查找并返回所有的酒店</p>
  </td>
</tr>
<tr>
  <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>hotelMapper.selectById(Integer id)</p>
  </td>
  <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
    <p>根据id查找一个酒店</p>
  </td>
</tr>
<tr>
  <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>hotelMapper.deleteHotel(Integer id)</p>
  </td>
  <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;"><span style="color: #262626; background-color: #FFFFFF;">更新一个影厅持久化对象</span></td>
</tr>
  <tr>
  <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>hotelMapper.updateHotelInfo(Hotel hotel)</p>
  </td>
  <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
    <p>根据id更新对应的酒店信息</p>
  </td>
</tr>
        </tbody>
</table>

（4）业务逻辑层的动态模型

下图表明了GreenTrip酒店管理系统中，当酒店工作人员更新酒店信息时，酒店业务逻辑处理的相关对象之间的协作：

![hotelbe](https://i.loli.net/2020/06/26/ICkUbqofg1mcKOe.png)

#### 4.1.4 roombl模块

（1）模块概述

roombl模块承担的需求见需求规格说明文档功能需求及相关非功能需求。

roombl模块的职责及接口参见软件系统结构描述文档

（2）整体结构

根据体系结构的设计，我们使用分层的模式来构建本系统，将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口。比如展示层和业务逻辑层之间，我们添加HotelController接口，业务逻辑层和数据层之间添加RoomService接口。样，我们将依赖于接口而非实体类，增加了系统的灵活性。

roombl模块的设计如下图所示：

![](https://i.loli.net/2020/06/26/6xTUDgiELHI5Q4a.png)



roombl模块的各个类的职责如下表所示：

| 模块            | 职责                                           |
| --------------- | ---------------------------------------------- |
| RoomServiceImpl | 负责实现酒店房间管理所需要的服务               |
| HotelRoom       | 酒店房间的领域模型对象，拥有酒店房间的相关信息 |

（3）模块内部类的接口规范

RoomServiceImpl的接口规范如下表所示：

<table class="lake-table">
  <tbody>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>提供的服务（供接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>RoomServiceImpl.retrieveHotelRoomInfo</p>
      </td>
      <td style="text-align: center;">
        <p>语法</p>
      </td>
      <td style="text-align: center;">
        <p>List retrieveHotelRoomInfo(Integer hotelId);</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td style="text-align: center;">
        <p>存在对应酒店</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td style="text-align: center;">
        <p>返回酒店房间列表</p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>RoomServiceImpl.insertRoomInfo</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>void insertRoomInfo(HotelRoom hotelRoom);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在用户登录</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库更新房间信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>RoomServiceImpl.updateRoomInfo</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>void updateRoomInfo(Integer hotelId, String roomType, Integer rooms);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在对应酒店的对应类型房间</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库更新房间信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>RoomServiceImpl.getRoomCurNum</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>int getRoomCurNum(Integer hotelId, String roomType);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在对应酒店的对应类型的房间</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回房间数量</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>RoomServiceImpl.modifyRoomInfo</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>void modifyRoomInfo(RoomVO roomVO);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在对应的房间</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库更新房间信息</p>
      </td>
    </tr>
          <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>需要的服务（需接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>vo.ResponseVO</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>检查调用是否成功</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>vo.RoomVO</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>传递房间信息</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>po.HotelRoom</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>房间实体类</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>roomMapper.updateRoomInfo(Integer hotelId,String roomType,Integer curNum);</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>更新房间持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>roomMapper.insertRoom(HotelRoom hotelRoom)</p>
      </td>
      <td colspan="2" style="text-align: center; background-color: #FFFFFF;">
        <p>新增一个房间持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>roomMapper.selectRoomsByHotelId(Integer hotelId)</p>
      </td>
      <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
        <p>根据id查找一个房间持久化对象列表</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>roomMapper.getRoomCurNum(Integer hotelId,String roomType)</p>
      </td>
      <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;"><span style="color: #262626; background-color: #FFFFFF;">根据id和房型查找一个房间持久化对象返回房间当前数目</span></td>
    </tr>
      <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>roomMapper.modifyRoomInfo(HotelRoom hotelRoom)</p>
      </td>
      <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
        <p>修改一个房间持久化对象</p>
      </td>
    </tr>
  </tbody>
</table>


（4）业务逻辑层的动态模型

下图表明了GreenTrip酒店管理系统中，当系统修改酒店剩余房间数量时，房间业务逻辑处理的相关对象之间的协作：



![](https://i.loli.net/2020/06/26/iM4uDzmSNTPtv6k.png)

#### 4.1.5 orderbl模块

（1）模块概述

orderbl模块承担的需求见需求规格说明文档功能需求及相关非功能需求。

orderbl模块的职责及接口参见软件系统结构描述文档

（2）整体结构

根据体系结构的设计，我们使用分层的模式来构建本系统，将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口。比如展示层和业务逻辑层之间，我们添加OrderController接口，业务逻辑层和数据层之间添加OrderService接口。样，我们将依赖于接口而非实体类，增加了系统的灵活性。

![order](https://i.loli.net/2020/06/26/jm9WcYhSNwZyi48.png)

orderbl模块的各个类的职责如下表所示：

| 模块             | 职责                                                         |
| ---------------- | ------------------------------------------------------------ |
| OrderServiceImpl | 负责实现用户账号管理所需要的服务                             |
| Order            | 系统用户的领域模型对象，拥有用户数据的用户名和密码，可以解决登录问题 |

（3）模块内部类的接口规范

OrderServiceImpl的接口规范如下表所示：

<table class="lake-table">
  <tbody>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>提供的服务（供接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>OrderServiceImpl.addOrder</p>
      </td>
      <td style="text-align: center;">
        <p>语法</p>
      </td>
      <td style="text-align: center;">
        <p>public ResponseVO addOrder(OrderVO orderVO);</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td style="text-align: center;">
        <p>获取前端传入的新增订单信息</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td style="text-align: center;">
        <p>数据库中增添对应订单</p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>OrderServiceImpl.getAllOrders</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List &lt;Order&gt; getAllOrders();</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>前端获取订单列表</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回所有订单信息</p>
      </td>
    </tr> 
      <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>OrderServiceImpl.getUserOrders</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List &lt;Order&gt; getUserOrders(int userid);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>前端获取用户订单列表</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回对应用户的所有订单信息</p>
      </td>
    </tr> 
      <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>OrderServiceImpl.annulOrder</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public ResponseVO annulOrder(int orderid);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>前端传入订单编号信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>将数据库中对应编号账单状态改为已撤销</p>
      </td>
    </tr> 
      <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>OrderServiceImpl.changeOrderState</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public ResponseVO changeOrderState(int orderid,String orderState);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>前端传入订单编号和修改成为的状态</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>修改对应订单的状态为指定状态</p>
      </td>
    </tr> 
      <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>OrderServiceImpl.OnlyChangeOrderState</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public void OnlyChangeOrderState(int orderid,String orderState);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>前端传入订单编号和修改成的对应状态</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>调用修改订单状态函数</p>
      </td>
    </tr> 
      <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>OrderServiceImpl.deleteOrder</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public ResponseVO deleteorder(int orderid);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>前端获取订单编号</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中删除对应订单</p>
      </td>
    </tr> 
      <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>OrderServiceImpl.getHotelOrders</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List &lt;Order&gt; getHotelOrders(Integer hotelId);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>前端传入酒店信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回酒店所有订单信息</p>
      </td>
    </tr> 
      <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>OrderServiceImpl.retrieveHotels</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List &lt;Order&gt; retrieveHotels();</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>前端获取顾客曾预定订单列表</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回顾客预定相关订单信息</p>
      </td>
    </tr> 
      <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>OrderServiceImpl.retrieveHotelDetails</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List &lt;Order&gt; retrieveHotelDetails(Integer hotelid);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>前端获取酒店编号</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回酒店所有订单信息</p>
      </td>
    </tr> 
      <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>OrderServiceImpl.judge</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List &lt;Order&gt; judge();</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>前端获取调用函数信号</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>修改数据库中符合条件的订单状态</p>
      </td>
    </tr> 
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>需要的服务（需接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>vo.ResponseVO</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>检查调用是否成功</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>po.Admin</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>实例化对象</p>
      </td>
    </tr>
      </tr>
      <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>OrderMapper.addOrder(User order)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>新增一个订单实例化对象</p>
      </td>
    </tr>
</tr>
      <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>OrderMapper.getAllOrders()</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>获取所有订单实例化对象</p>
      </td>
    </tr>
 <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>OrderMapper.getUserOrders(int userid)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>获取对应用户所有订单实例化对象</p>
      </td>
    </tr>
 <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>OrderMapper.getAllHotelOrders(int hotelid)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>获取对应酒店所有订单实例化对象</p>
      </td>
    </tr>
 <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>OrderMapper.annualOrders(int orderid)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>撤销对应订单</p>
      </td>
    </tr>
 <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>OrderMapper.getOrdersById(int orderid)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>获取对应订单</p>
      </td>
    </tr>
 <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>OrderMapper.changeOrderState(int orderid,String orderState)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>修改对应订单为对应状态</p>
      </td>
    </tr>
 <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>OrderMapper.deleteOrder(int orderid)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>删除对应订单实例化对象</p>
      </td>
    </tr>
   </tbody>
</table>



（4）业务逻辑层的动态模型

下图表明了GreenTrip酒店管理系统中，当管理人员获取所有订单信息时，用户业务逻辑处理的相关对象之间的协作：

![概念类图 _1_.jpg](https://i.loli.net/2020/06/25/jpiS17gPnLhu8mx.png)

#### 4.1.6 userbl模块

（1）模块概述

userbl模块承担的需求见需求规格说明文档功能需求及相关非功能需求。

userbl模块的职责及接口参见软件系统结构描述文档

（2）整体结构

根据体系结构的设计，我们使用分层的模式来构建本系统，将系统分为展示层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会添加接口。比如展示层和业务逻辑层之间，我们添加AccountController接口，业务逻辑层和数据层之间添加AccountService接口。样，我们将依赖于接口而非实体类，增加了系统的灵活性。

userbl模块的设计如下图所示：

![模块设计.PNG](https://i.loli.net/2020/06/24/6GtfmAr15y2EF4B.png)



userbl模块的各个类的职责如下表所示：

| 模块               | 职责                                                         |
| ------------------ | ------------------------------------------------------------ |
| AccountServiceImpl | 负责实现用户账号管理所需要的服务                             |
| User               | 系统用户的领域模型对象，拥有用户数据的用户名和密码，可以解决登录问题 |

（3）模块内部类的接口规范

AccountServiceImpl的接口规范如下表所示：

<table class="lake-table">
  <tbody>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>提供的服务（供接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>AccountServiceImpl.registerAccount</p>
      </td>
      <td style="text-align: center;">
        <p>语法</p>
      </td>
      <td style="text-align: center;">
        <p>public ResponseVO registerAccount(UserVO userVO);</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td style="text-align: center;">
        <p>存在注册用户</p>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td style="text-align: center;">
        <p>返回注册结果</p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        <p>AccountServiceImpl.login</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public User login(UserForm userForm);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在用户登录</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回对应用户</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>AccountServiceImpl.getUserInfo</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public User getUserInfo(int id);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在对应id的用户</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回用户信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>AccountServiceImpl.updateUserInfo</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public ResponseVO updateUserInfo(int id, String password, String username, String phonenumber,String birthday,String enterprise);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在对应id的用户</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回更新结果</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>AccountServiceImpl.getUserLevel</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public Integer getUserLevel(int id);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在对应id的用户</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回用户等级</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>AccountServiceImpl.changeCredit</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public ResponseVO changeCredit(int id,double chargeMoney);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在对应id的用户</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回修改结果</p>
      </td>
    </tr>
      <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>AccountServiceImpl.updateUserLevel</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public ResponseVO updateUserLevel(int id);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在对应id的用户</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回更新结果</p>
      </td>
    </tr>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>需要的服务（需接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>vo.ResponseVO</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>检查调用是否成功</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>po.User</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>用户实体类</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>accountMapper.createNewAccount(User user)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>新增一个用户持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>accountMapper.getAccountByName(String email)</p>
      </td>
      <td colspan="2" style="text-align: center; background-color: #FFFFFF;">
        <p>根据email查找单一用户持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>accountMapper.getAccountById(int id)</p>
      </td>
      <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
        <p>根据id查找一个用户持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>accountMapper.updateAccount(int id, String password, String username, String phonenumber, String birthday, String enterprise)</p>
      </td>
      <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;"><span style="color: #262626; background-color: #FFFFFF;">更新一个用户持久化对象</span></td>
    </tr>
      <tr>
  <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>accountMapper.updateLevel(int id, Integer viplevel)</p>
  </td>
  <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;"><span style="color: #262626; background-color: #FFFFFF;">更新一个用户持久化对象的VIP等级</span></td>
</tr>
   <tr>
  <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>accountMapper.changeCredit(int id, double credit)</p>
  </td>
  <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;"><span style="color: #262626; background-color: #FFFFFF;">更新一个用户对象的信用值</span></td>
</tr>
  <tr>
  <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
    <p>accountMapperupdateUserAvatar(int id,String iconChoose)</p>
  </td>
  <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;"><span style="color: #262626; background-color: #FFFFFF;">更新一个用户对象的头像</span></td>
</tr>
</tbody>
</table>



（4）业务逻辑层的动态模型

下图表明了GreenTrip酒店管理系统中，当用户获取账号信息时，用户业务逻辑处理的相关对象之间的协作：

![动态模型.PNG](https://i.loli.net/2020/06/24/3zWqxvkEiBRPQbr.png)



## 5. 依赖视角

下图是服务器端包之间的依赖关系：

![](https://i.loli.net/2020/06/25/Zxn3PBqHFLC1siR.png)